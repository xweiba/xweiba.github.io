{"title":"Angular中使用ngx-translate国际化","uid":"839853fd0791fa00d2de2eab05708e12","slug":"Angular中使用ngx-translate国际化","date":"2022-12-23T06:01:52.000Z","updated":"2025-04-30T08:11:18.830Z","comments":true,"path":"api/articles/Angular中使用ngx-translate国际化.json","keywords":null,"cover":null,"content":"<h2 id=\"12-Angular中使用ngx-translate国际化\"><a href=\"#12-Angular中使用ngx-translate国际化\" class=\"headerlink\" title=\"12.Angular中使用ngx-translate国际化\"></a><center>12.Angular中使用ngx-translate国际化</center></h2><h4 id=\"1-下载依赖\"><a href=\"#1-下载依赖\" class=\"headerlink\" title=\"1. 下载依赖\"></a>1. 下载依赖</h4><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install @ngx-translate/core --save</span><br><span class=\"line\"></span><br><span class=\"line\">-- 如果需要指定翻译文件,则还需下载</span><br><span class=\"line\">npm install @ngx-translate/http-loader --save</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"2-导入TranslateModule模块\"><a href=\"#2-导入TranslateModule模块\" class=\"headerlink\" title=\"2. 导入TranslateModule模块\"></a>2. 导入TranslateModule模块</h4><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">import &#123; TranslateLoader, TranslateModule &#125; from &#x27;@ngx-translate/core&#x27;;</span><br><span class=\"line\">import &#123; TranslateHttpLoader &#125; from &#x27;@ngx-translate/http-loader&#x27;;</span><br><span class=\"line\"></span><br><span class=\"line\">@NgModule(&#123;</span><br><span class=\"line\">  declarations: [</span><br><span class=\"line\">    AppComponent</span><br><span class=\"line\">  ],</span><br><span class=\"line\">  imports: [</span><br><span class=\"line\">    ...</span><br><span class=\"line\">    TranslateModule.forRoot(&#123;</span><br><span class=\"line\">      loader: &#123;</span><br><span class=\"line\">        provide: TranslateLoader,</span><br><span class=\"line\">        useFactory:  (http: HttpClient) =&gt; new TranslateHttpLoader(http, &#x27;./assets/i18n/&#x27;, &#x27;.json&#x27;), //指定加载的配置文件</span><br><span class=\"line\">        deps: [HttpClient]</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      defaultLanguage: &#x27;tw&#x27; //指定默认语系</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  ],</span><br><span class=\"line\">  providers: [</span><br><span class=\"line\">    &#123; provide: MAT_DIALOG_DATA, useValue: &#123;&#125; &#125;</span><br><span class=\"line\">  ],</span><br><span class=\"line\">  bootstrap: [AppComponent]</span><br><span class=\"line\">&#125;)</span><br></pre></td></tr></table></figure>\n\n\n\n<h4 id=\"3-使用\"><a href=\"#3-使用\" class=\"headerlink\" title=\"3. 使用\"></a>3. 使用</h4><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">在html中使用,可以通过指定或者管道</span><br><span class=\"line\">&lt;span (click)=&quot;editChannel()&quot;&gt;&#123;&#123;&#x27;edit&#x27;|translate&#125;&#125;&lt;/span&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">//translate:params,params是参数,key与的翻译文件中的一致</span><br><span class=\"line\">&lt;span [innerHTML]=&quot;&#x27;liveChannel.pageTips&#x27;|translate:&#123;&#x27;0&#x27;:totalCount&#125;&quot;&gt;&lt;/span&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">在ts中使用,需要引入TranslateService</span><br><span class=\"line\">import &#123; TranslateService &#125; from &#x27;@ngx-translate/core&#x27;;</span><br><span class=\"line\"></span><br><span class=\"line\">constructor(public translate: TranslateService) &#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">//翻译多语言</span><br><span class=\"line\">this.translate.instant(&#x27;liveChannel.selectOneTip&#x27;)</span><br></pre></td></tr></table></figure>\n\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p><a href=\"https://github.com/ngx-translate/core\">官网地址</a></p></blockquote>\n<h4 id=\"4-ts中使用translate-instant未初始化\"><a href=\"#4-ts中使用translate-instant未初始化\" class=\"headerlink\" title=\"4. ts中使用translate.instant未初始化\"></a>4. ts中使用<code>translate.instant</code>未初始化</h4><p>在<code>AppModule</code>中添加:</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">providers: [&#123;</span><br><span class=\"line\">    provide: APP_INITIALIZER,</span><br><span class=\"line\">    useFactory: appInitializerFactory,</span><br><span class=\"line\">    deps: [TranslateService, Injector],</span><br><span class=\"line\">    multi: true</span><br><span class=\"line\">  &#125;]</span><br><span class=\"line\"></span><br><span class=\"line\">export function appInitializerFactory(translate: TranslateService, injector: Injector) &#123;</span><br><span class=\"line\">  return () =&gt; new Promise&lt;any&gt;((resolve: any) =&gt; &#123;</span><br><span class=\"line\">    // console.log(&#x27;appInitializerFactory--&#x27;);</span><br><span class=\"line\">    const locationInitialized = injector.get(LOCATION_INITIALIZED, Promise.resolve(null));</span><br><span class=\"line\">    locationInitialized.then(() =&gt; &#123;</span><br><span class=\"line\">      const langToSet = environment.locale;</span><br><span class=\"line\">      translate.setDefaultLang(environment.locale);</span><br><span class=\"line\">      translate.use(langToSet).subscribe(() =&gt; &#123;</span><br><span class=\"line\">        // console.info(`Successfully initialized &#x27;$&#123;langToSet&#125;&#x27; language.&#x27;`);</span><br><span class=\"line\">      &#125;, err =&gt; &#123;</span><br><span class=\"line\">        // console.error(`Problem with &#x27;$&#123;langToSet&#125;&#x27; language initialization.&#x27;`);</span><br><span class=\"line\">      &#125;, () =&gt; &#123;</span><br><span class=\"line\">        resolve(null);</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">@NgModule(&#123;</span><br><span class=\"line\">  declarations: [</span><br><span class=\"line\">    AppComponent</span><br><span class=\"line\">  ],</span><br><span class=\"line\">  imports: [</span><br><span class=\"line\">    BrowserModule,</span><br><span class=\"line\">    AppRoutingModule,</span><br><span class=\"line\">    BrowserAnimationsModule,</span><br><span class=\"line\">    FormsModule,</span><br><span class=\"line\">    ReactiveFormsModule,</span><br><span class=\"line\">    HttpClientModule,</span><br><span class=\"line\">    TranslateModule.forRoot(&#123;</span><br><span class=\"line\">      loader: &#123;</span><br><span class=\"line\">        provide: TranslateLoader,</span><br><span class=\"line\">        useFactory: (http: HttpClient) =&gt; new TranslateHttpLoader(http, &#x27;./assets/i18n/&#x27;, &#x27;.json&#x27;),</span><br><span class=\"line\">        deps: [HttpClient]</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      defaultLanguage: environment.locale</span><br><span class=\"line\">    &#125;),</span><br><span class=\"line\">  ],</span><br><span class=\"line\">  providers: [&#123;</span><br><span class=\"line\">    provide: APP_INITIALIZER,</span><br><span class=\"line\">    useFactory: appInitializerFactory,</span><br><span class=\"line\">    deps: [TranslateService, Injector],</span><br><span class=\"line\">    multi: true</span><br><span class=\"line\">  &#125;],</span><br><span class=\"line\">  bootstrap: [AppComponent]</span><br><span class=\"line\">&#125;)</span><br><span class=\"line\">export class AppModule &#123; &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">export function appInitializerFactory(translate: TranslateService, injector: Injector) &#123;</span><br><span class=\"line\">  return () =&gt; new Promise&lt;any&gt;((resolve: any) =&gt; &#123;</span><br><span class=\"line\">    // console.log(&#x27;appInitializerFactory--&#x27;);</span><br><span class=\"line\">    const locationInitialized = injector.get(LOCATION_INITIALIZED, Promise.resolve(null));</span><br><span class=\"line\">    locationInitialized.then(() =&gt; &#123;</span><br><span class=\"line\">      const langToSet = environment.locale;</span><br><span class=\"line\">      translate.setDefaultLang(environment.locale);</span><br><span class=\"line\">      translate.use(langToSet).subscribe(() =&gt; &#123;</span><br><span class=\"line\">        // console.info(`Successfully initialized &#x27;$&#123;langToSet&#125;&#x27; language.&#x27;`);</span><br><span class=\"line\">      &#125;, err =&gt; &#123;</span><br><span class=\"line\">        // console.error(`Problem with &#x27;$&#123;langToSet&#125;&#x27; language initialization.&#x27;`);</span><br><span class=\"line\">      &#125;, () =&gt; &#123;</span><br><span class=\"line\">        resolve(null);</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  </span><br></pre></td></tr></table></figure>","text":"12.Angular中使用ngx-translate国际化1. 下载依赖12345npm install @ngx-translate/core --save-...","permalink":"/post/Angular中使用ngx-translate国际化","photos":[],"count_time":{"symbolsCount":"4.2k","symbolsTime":"4 mins."},"categories":[{"name":"Angular","slug":"Angular","count":16,"path":"api/categories/Angular.json"}],"tags":[{"name":"Angular","slug":"Angular","count":16,"path":"api/tags/Angular.json"},{"name":"ngx-translate","slug":"ngx-translate","count":1,"path":"api/tags/ngx-translate.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#12-Angular%E4%B8%AD%E4%BD%BF%E7%94%A8ngx-translate%E5%9B%BD%E9%99%85%E5%8C%96\"><span class=\"toc-text\">12.Angular中使用ngx-translate国际化</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#1-%E4%B8%8B%E8%BD%BD%E4%BE%9D%E8%B5%96\"><span class=\"toc-text\">1. 下载依赖</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#2-%E5%AF%BC%E5%85%A5TranslateModule%E6%A8%A1%E5%9D%97\"><span class=\"toc-text\">2. 导入TranslateModule模块</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#3-%E4%BD%BF%E7%94%A8\"><span class=\"toc-text\">3. 使用</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#4-ts%E4%B8%AD%E4%BD%BF%E7%94%A8translate-instant%E6%9C%AA%E5%88%9D%E5%A7%8B%E5%8C%96\"><span class=\"toc-text\">4. ts中使用translate.instant未初始化</span></a></li></ol></li></ol></li></ol>","author":{"name":"Weiba","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/24520686?v=4","link":"/","description":"啊 又忘了更新了！","socials":{"github":"https://github.com/xweiba","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"Python 错误记录","uid":"461f09e8a9ebcf7e8b3c5503ee4a2495","slug":"Python 错误记录","date":"2022-12-23T06:09:15.000Z","updated":"2025-04-30T08:11:18.862Z","comments":true,"path":"api/articles/Python 错误记录.json","keywords":null,"cover":null,"text":" 编码错误, 头部添加: 1# -*- coding: utf-8 -* No module named ‘xxx’, 找不到模块, 安装即可 1pip ins...","permalink":"/post/Python 错误记录","photos":[],"count_time":{"symbolsCount":131,"symbolsTime":"1 mins."},"categories":[{"name":"Python","slug":"Python","count":7,"path":"api/categories/Python.json"}],"tags":[{"name":"Python","slug":"Python","count":7,"path":"api/tags/Python.json"},{"name":"错误记录","slug":"错误记录","count":4,"path":"api/tags/错误记录.json"}],"author":{"name":"Weiba","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/24520686?v=4","link":"/","description":"啊 又忘了更新了！","socials":{"github":"https://github.com/xweiba","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"Angular中的异步请求","uid":"4a2146c891a4987dfd157bfd8404c794","slug":"Angular中的异步请求","date":"2022-12-23T05:59:29.000Z","updated":"2025-04-30T08:11:18.830Z","comments":true,"path":"api/articles/Angular中的异步请求.json","keywords":null,"cover":null,"text":"6.Angular中的异步请求1. RxJs介绍 Angular中集成了RxJs来操作异步. 123456789101112131415161718192021...","permalink":"/post/Angular中的异步请求","photos":[],"count_time":{"symbolsCount":"3.5k","symbolsTime":"3 mins."},"categories":[{"name":"Angular","slug":"Angular","count":16,"path":"api/categories/Angular.json"}],"tags":[{"name":"Angular","slug":"Angular","count":16,"path":"api/tags/Angular.json"},{"name":"异步请求","slug":"异步请求","count":1,"path":"api/tags/异步请求.json"}],"author":{"name":"Weiba","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/24520686?v=4","link":"/","description":"啊 又忘了更新了！","socials":{"github":"https://github.com/xweiba","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}