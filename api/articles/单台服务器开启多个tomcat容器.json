{"title":"单台服务器开启多个tomcat容器","uid":"8bb687a0cfcbb9d3221fc98ae3453fd0","slug":"单台服务器开启多个tomcat容器","date":"2018-09-23T05:23:54.000Z","updated":"2025-04-30T08:11:18.900Z","comments":true,"path":"api/articles/单台服务器开启多个tomcat容器.json","keywords":null,"cover":null,"content":"<h2 id=\"复制一份-tomcat-作为备用容器\"><a href=\"#复制一份-tomcat-作为备用容器\" class=\"headerlink\" title=\"复制一份 tomcat 作为备用容器\"></a>复制一份 tomcat 作为备用容器</h2><ol>\n<li><code>cp -R tomcat/ tomcat_2</code></li>\n</ol>\n<h2 id=\"设置环境变量\"><a href=\"#设置环境变量\" class=\"headerlink\" title=\"设置环境变量\"></a>设置环境变量</h2><ol>\n<li>编辑环境变量 <code>vim /etc/profile</code>, 最后一行添加:<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">##########first tomcat###########</span></span><br><span class=\"line\">CATALINA_BASE=/www/server/tomcat</span><br><span class=\"line\">CATALINA_HOME=/www/server/tomcat</span><br><span class=\"line\">TOMCAT_HOME=/www/server/tomcat</span><br><span class=\"line\"><span class=\"built_in\">export</span> CATALINA_BASE CATALINA_HOME TOMCAT_HOME</span><br><span class=\"line\"><span class=\"comment\">##########second tomcat##########</span></span><br><span class=\"line\">CATALINA_2_BASE=/www/server/tomcat_2</span><br><span class=\"line\">CATALINA_2_HOME=/www/server/tomcat_2</span><br><span class=\"line\">TOMCAT_2_HOME=/www/server/tomcat_2</span><br><span class=\"line\"><span class=\"built_in\">export</span> CATALINA_2_BASE CATALINA_2_HOME TOMCAT_2_HOME</span><br></pre></td></tr></table></figure></li>\n<li>更新环境变量 <code>source /etc/profile</code></li>\n</ol>\n<h2 id=\"配置-tomcat-2\"><a href=\"#配置-tomcat-2\" class=\"headerlink\" title=\"配置 tomcat_2\"></a>配置 tomcat_2</h2><ol>\n<li><p>配置启动环境变量, 进入 <code>tomcat_2</code> 目录, 编辑其 <code>bin/catalina.sh</code>, 找到<code>OS specific support.  $var _must_ be set to either true or false.</code>, 插入 <code>tomcat2</code> 的环境变量</p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># OS specific support.  $var _must_ be set to either true or false.</span></span><br><span class=\"line\"><span class=\"comment\"># 添加tomcat2 环境变量</span></span><br><span class=\"line\"><span class=\"built_in\">export</span> CATALINA_BASE=<span class=\"variable\">$CATALINA_2_BASE</span></span><br><span class=\"line\"><span class=\"built_in\">export</span> CATALINA_HOME=<span class=\"variable\">$CATALINA_2_HOME</span></span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure></li>\n<li><p>配置容器端口, 编辑 <code>tomcat_2/conf/server.xml</code>, 分别修改下列几个端口号, 与 <code>tomcat1</code> 的端口不同即可.</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- 8005=&gt;9005 tomcat shutdown端口--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">Server</span> <span class=\"attr\">port</span>=<span class=\"string\">&quot;9005&quot;</span> <span class=\"attr\">shutdown</span>=<span class=\"string\">&quot;SHUTDOWN&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- 8080=&gt;9080 tomcat web端口--&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">Connector</span> <span class=\"attr\">port</span>=<span class=\"string\">&quot;9080&quot;</span> <span class=\"attr\">protocol</span>=<span class=\"string\">&quot;HTTP/1.1&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">               <span class=\"attr\">connectionTimeout</span>=<span class=\"string\">&quot;20000&quot;</span></span></span><br><span class=\"line\"><span class=\"tag\">               <span class=\"attr\">redirectPort</span>=<span class=\"string\">&quot;8443&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- 8009=&gt;9009 AJP1.3端口 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">Connector</span> <span class=\"attr\">port</span>=<span class=\"string\">&quot;9009&quot;</span> <span class=\"attr\">protocol</span>=<span class=\"string\">&quot;AJP/1.3&quot;</span> <span class=\"attr\">redirectPort</span>=<span class=\"string\">&quot;8443&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>防火墙放通端口 <code>8080</code> <code>9080</code></p>\n</li>\n</ol>\n<ul>\n<li><code>firewall-cmd --zone=public --add-port=8080/tcp --permanent</code></li>\n<li><code>firewall-cmd --zone=public --add-port=9080/tcp --permanent</code></li>\n<li><code>firewall-cmd --reload</code></li>\n</ul>\n<ol start=\"4\">\n<li>启动容器</li>\n</ol>\n<ul>\n<li>分别运行对应目录启动脚本 <code>bin/startup.sh</code></li>\n</ul>\n<ol start=\"5\">\n<li>通过服务器ip:端口号测试</li>\n</ol>\n","text":"复制一份 tomcat 作为备用容器 cp -R tomcat/ tomcat_2 设置环境变量 编辑环境变量 vim /etc/profile, 最后一行添加...","permalink":"/post/单台服务器开启多个tomcat容器","photos":[],"count_time":{"symbolsCount":"1.5k","symbolsTime":"1 mins."},"categories":[{"name":"Tomcat","slug":"Tomcat","count":1,"path":"api/categories/Tomcat.json"}],"tags":[{"name":"Shell","slug":"Shell","count":5,"path":"api/tags/Shell.json"},{"name":"Tomcat","slug":"Tomcat","count":1,"path":"api/tags/Tomcat.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%A4%8D%E5%88%B6%E4%B8%80%E4%BB%BD-tomcat-%E4%BD%9C%E4%B8%BA%E5%A4%87%E7%94%A8%E5%AE%B9%E5%99%A8\"><span class=\"toc-text\">复制一份 tomcat 作为备用容器</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E8%AE%BE%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F\"><span class=\"toc-text\">设置环境变量</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E9%85%8D%E7%BD%AE-tomcat-2\"><span class=\"toc-text\">配置 tomcat_2</span></a></li></ol>","author":{"name":"Weiba","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/24520686?v=4","link":"/","description":"啊 又忘了更新了！","socials":{"github":"https://github.com/xweiba","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"Redis 常用命令","uid":"30d9f989f7c5ece7f14c8ad72bebe5dc","slug":"Redis 常用命令","date":"2018-12-23T05:13:16.000Z","updated":"2025-04-30T08:11:18.862Z","comments":true,"path":"api/articles/Redis 常用命令.json","keywords":null,"cover":null,"text":"Window 下安装 下载地址：https://github.com/MSOpenTech/redis/releases Redis) 支持 32 位和 64 ...","permalink":"/post/Redis 常用命令","photos":[],"count_time":{"symbolsCount":"13k","symbolsTime":"11 mins."},"categories":[{"name":"Redis","slug":"Redis","count":3,"path":"api/categories/Redis.json"}],"tags":[{"name":"常用命令","slug":"常用命令","count":10,"path":"api/tags/常用命令.json"},{"name":"Redis","slug":"Redis","count":5,"path":"api/tags/Redis.json"}],"author":{"name":"Weiba","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/24520686?v=4","link":"/","description":"啊 又忘了更新了！","socials":{"github":"https://github.com/xweiba","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"Memcached","uid":"ea02254a039ac79c314d2c9af30af5fa","slug":"Memcached","date":"2018-08-14T05:35:23.000Z","updated":"2025-04-30T08:11:18.862Z","comments":true,"path":"api/articles/Memcached.json","keywords":null,"cover":null,"text":"安装准备 Linux系统安装memcached，首先要先安装libevent库。 Ubuntu/Debian: sudo apt-get install lib...","permalink":"/post/Memcached","photos":[],"count_time":{"symbolsCount":"1.6k","symbolsTime":"1 mins."},"categories":[{"name":"Memcached","slug":"Memcached","count":2,"path":"api/categories/Memcached.json"}],"tags":[{"name":"Memcached","slug":"Memcached","count":1,"path":"api/tags/Memcached.json"}],"author":{"name":"Weiba","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/24520686?v=4","link":"/","description":"啊 又忘了更新了！","socials":{"github":"https://github.com/xweiba","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}