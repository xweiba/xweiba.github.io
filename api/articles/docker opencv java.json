{"title":"docker opencv java","uid":"962aae778a6cc57574cfe7bd171e7d85","slug":"docker opencv java","date":"2019-11-13T03:01:47.000Z","updated":"2025-04-30T08:11:18.900Z","comments":true,"path":"api/articles/docker opencv java.json","keywords":null,"cover":null,"content":"<p>Dockerfile:</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">FROM centos:7.4.1708</span><br><span class=\"line\"></span><br><span class=\"line\">MAINTAINER noasking</span><br><span class=\"line\"></span><br><span class=\"line\"># 更换阿里源</span><br><span class=\"line\">RUN yum install -y wget</span><br><span class=\"line\">RUN cd /etc/yum.repos.d \\</span><br><span class=\"line\">    &amp;&amp; mv CentOS-Base.repo CentOS-Base.repo.bak \\</span><br><span class=\"line\">    &amp;&amp; wget -O CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo \\</span><br><span class=\"line\">    &amp;&amp; yum clean all \\</span><br><span class=\"line\">    &amp;&amp; yum makecache</span><br><span class=\"line\"></span><br><span class=\"line\"># 必要なパッケージインストール</span><br><span class=\"line\">################################################################################</span><br><span class=\"line\">RUN yum update -y \\</span><br><span class=\"line\">        &amp;&amp; yum install -y git gcc gcc-c++ autoconf automake cmake \\</span><br><span class=\"line\">                          freetype-devel libtool make mercurial nasm \\</span><br><span class=\"line\">                          pkgconfig zlib-devel \\</span><br><span class=\"line\">                          bzip2-devel hostname \\</span><br><span class=\"line\">                          openssl \\</span><br><span class=\"line\">                          openssl-devel \\</span><br><span class=\"line\">                          wget \\</span><br><span class=\"line\">                          which \\</span><br><span class=\"line\">                          boost* \\</span><br><span class=\"line\">                          ant \\</span><br><span class=\"line\">        &amp;&amp; yum clean all</span><br><span class=\"line\"></span><br><span class=\"line\"># Java 安装</span><br><span class=\"line\">ADD jdk-8u131-linux-x64.tar.gz /</span><br><span class=\"line\"></span><br><span class=\"line\"># 配置环境变量</span><br><span class=\"line\">ENV JAVA_HOME /jdk1.8.0_131</span><br><span class=\"line\">ENV JRE_HOME $JAVA_HOME/jre</span><br><span class=\"line\">ENV CLASSPATH .:$JAVA_HOME/lib:$JRE_HOME/lib</span><br><span class=\"line\">ENV PATH $PATH:$JAVA_HOME/bin</span><br><span class=\"line\"></span><br><span class=\"line\"># OpenCV 配置</span><br><span class=\"line\">################################################################################</span><br><span class=\"line\">COPY opencv-3.4.0.tar.gz /</span><br><span class=\"line\"></span><br><span class=\"line\">RUN cd \\</span><br><span class=\"line\">    &amp;&amp; mkdir opencv &amp;&amp; tar xvzf /opencv-3.4.0.tar.gz -C opencv --strip-components 1 \\</span><br><span class=\"line\">    &amp;&amp; cd opencv \\</span><br><span class=\"line\">    &amp;&amp; mkdir build \\</span><br><span class=\"line\">    &amp;&amp; cd build \\</span><br><span class=\"line\">    &amp;&amp; cmake -D CMAKE_BUILD_TYPE=RELEASE -D CMAKE_INSTALL_PREFIX=/opencv/release -D BUILD_TESTS=OFF ..\\</span><br><span class=\"line\">    &amp;&amp; make -j8 \\</span><br><span class=\"line\">    &amp;&amp; make install \\</span><br><span class=\"line\">    &amp;&amp; cp /opencv/release/share/OpenCV/java/libopencv_java340.so /usr/local/lib/ \\</span><br><span class=\"line\">    &amp;&amp; cd \\</span><br><span class=\"line\">    &amp;&amp; rm -f /opencv-3.4.0.tar.gz</span><br><span class=\"line\"></span><br><span class=\"line\"># Boostのパス設定</span><br><span class=\"line\">ENV BOOST_ROOT /usr/lib64/</span><br><span class=\"line\">ENV Boost_INCLUDE_DIR /usr/include/boost/</span><br><span class=\"line\"># LD_LIBRARY_PATH設定</span><br><span class=\"line\">ENV LD_LIBRARY_PATH $LD_LIBRARY_PATH:/usr/local/lib</span><br><span class=\"line\"></span><br><span class=\"line\"># WORK_DIRECTORY設定</span><br><span class=\"line\">WORKDIR /app</span><br><span class=\"line\"></span><br><span class=\"line\"># CMD設定(BASH)</span><br><span class=\"line\">CMD [&quot;/bin/bash&quot;]</span><br></pre></td></tr></table></figure>\n\n<p>java8 ：<a href=\"https://download.oracle.com/otn-pub/java/jdk/8u131-b11/d54c1d3a095b4ff2b6607d096fa80163/jdk-8u131-linux-x64.tar.gz?AuthParam=1568135886_528af9016dad133b0ae80c04ec8286c6\">下载地址</a></p>\n<p>opencv : <a href=\"https://github.com/opencv/opencv/archive/4.1.1.tar.gz\">下载地址</a></p>\n<p>docker build -t xiaoweiba1028&#x2F;opencv-java . </p>\n","text":"Dockerfile: 12345678910111213141516171819202122232425262728293031323334353637383...","permalink":"/post/docker opencv java","photos":[],"count_time":{"symbolsCount":"2.1k","symbolsTime":"2 mins."},"categories":[{"name":"docker","slug":"docker","count":2,"path":"api/categories/docker.json"}],"tags":[{"name":"docker","slug":"docker","count":5,"path":"api/tags/docker.json"},{"name":"opencv","slug":"opencv","count":1,"path":"api/tags/opencv.json"}],"toc":"","author":{"name":"Weiba","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/24520686?v=4","link":"/","description":"啊 又忘了更新了！","socials":{"github":"https://github.com/xweiba","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"make 报错记录","uid":"fbc6ad4990d68b98c82bd7ba19e4ee89","slug":"make 报错记录","date":"2019-11-13T05:20:10.000Z","updated":"2025-04-30T08:11:18.900Z","comments":true,"path":"api/articles/make 报错记录.json","keywords":null,"cover":null,"text":" c++: internal compiler error: Killed (program cc1plus)网上说是内存原因, 一般云主机都是1G左右内存, ...","permalink":"/post/make 报错记录","photos":[],"count_time":{"symbolsCount":523,"symbolsTime":"1 mins."},"categories":[{"name":"make","slug":"make","count":1,"path":"api/categories/make.json"}],"tags":[{"name":"错误记录","slug":"错误记录","count":4,"path":"api/tags/错误记录.json"},{"name":"经验","slug":"经验","count":7,"path":"api/tags/经验.json"},{"name":"make","slug":"make","count":1,"path":"api/tags/make.json"}],"author":{"name":"Weiba","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/24520686?v=4","link":"/","description":"啊 又忘了更新了！","socials":{"github":"https://github.com/xweiba","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"linux 创建 swap 交换分区","uid":"0506587fbaa1eab77bb8eb284177e762","slug":"linux 创建 swap 交换分区","date":"2019-11-07T05:21:12.000Z","updated":"2025-04-30T08:11:18.900Z","comments":true,"path":"api/articles/linux 创建 swap 交换分区.json","keywords":null,"cover":null,"text":" 大部分云主机都是没有开启 swap 交换分区的, 且内存都在 1-2G 左右, 在编译源码时可能会因为内存不足而编译失败. 1. 创建一个空文件 sudo d...","permalink":"/post/linux 创建 swap 交换分区","photos":[],"count_time":{"symbolsCount":879,"symbolsTime":"1 mins."},"categories":[{"name":"Linux","slug":"Linux","count":7,"path":"api/categories/Linux.json"}],"tags":[{"name":"Linux","slug":"Linux","count":8,"path":"api/tags/Linux.json"},{"name":"Swap","slug":"Swap","count":1,"path":"api/tags/Swap.json"}],"author":{"name":"Weiba","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/24520686?v=4","link":"/","description":"啊 又忘了更新了！","socials":{"github":"https://github.com/xweiba","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}