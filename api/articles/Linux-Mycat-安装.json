{"title":"Linux Mycat 安装","uid":"d541a36f3dacb48a21926b2d741c0c48","slug":"Linux-Mycat-安装","date":"2020-09-28T03:13:46.000Z","updated":"2025-04-30T08:11:18.861Z","comments":true,"path":"api/articles/Linux-Mycat-安装.json","keywords":null,"cover":[],"content":"<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>最近有个数据迁移需求, 量比较大, 搞个新环境测试下~ </p>\n<p>以下内容参考至官方文档: <a href=\"https://github.com/MyCATApache/Mycat-Server/wiki\">https://github.com/MyCATApache/Mycat-Server/wiki</a></p></blockquote>\n<h1 id=\"下载-Mycat\"><a href=\"#下载-Mycat\" class=\"headerlink\" title=\"下载 Mycat\"></a>下载 Mycat</h1><p>官网下载后解压即可.</p>\n<h2 id=\"目录说明\"><a href=\"#目录说明\" class=\"headerlink\" title=\"目录说明\"></a>目录说明</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">--bin\t\t启动目录</span><br><span class=\"line\">--conf\t\t配置文件存放配置文件</span><br><span class=\"line\">--lib\t\tMyCAT自身的jar包或依赖的jar包的存放目录。</span><br><span class=\"line\">--logs\t\tMyCAT日志的存放目录。日志存放在logs/log中，每天一个文件</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"运行\"><a href=\"#运行\" class=\"headerlink\" title=\"运行\"></a>运行</h1><p>Linux 相关脚本:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">./mycat start 启动</span><br><span class=\"line\"></span><br><span class=\"line\">./mycat stop 停止</span><br><span class=\"line\"></span><br><span class=\"line\">./mycat console 前台运行</span><br><span class=\"line\"></span><br><span class=\"line\">./mycat install 添加到系统自动启动（暂未实现）</span><br><span class=\"line\"></span><br><span class=\"line\">./mycat remove 取消随系统自动启动（暂未实现）</span><br><span class=\"line\"></span><br><span class=\"line\">./mycat restart 重启服务</span><br><span class=\"line\"></span><br><span class=\"line\">./mycat pause 暂停</span><br><span class=\"line\"></span><br><span class=\"line\">./mycat status 查看启动状态</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"配置-Mycat\"><a href=\"#配置-Mycat\" class=\"headerlink\" title=\"配置 Mycat\"></a>配置 Mycat</h1><p><code>Mycat</code> 最重要的3大配置文件：</p>\n<h2 id=\"服务配置-server-xml\"><a href=\"#服务配置-server-xml\" class=\"headerlink\" title=\"服务配置 server.xml\"></a>服务配置 <code>server.xml</code></h2><p><code>system</code>  参数是所有的 <code>mycat</code> 参数配置，比如添加解析器：<code>defaultSqlParser</code>，其他类推  <code>user </code> 是用户参数。</p>\n<p>添加两个 <code>mycat</code> 逻辑库：<code>user</code>  和 <code>pay</code>.</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"keyword\">mycat</span>:server <span class=\"keyword\">SYSTEM</span> <span class=\"string\">&quot;server.dtd&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">mycat:server</span> <span class=\"attr\">xmlns:mycat</span>=<span class=\"string\">&quot;http://io.mycat/&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">system</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;defaultSqlParser&quot;</span>&gt;</span>druidparser<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;mutiNodeLimitType&quot;</span>&gt;</span>1<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;serverPort&quot;</span>&gt;</span>3309<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;managerPort&quot;</span>&gt;</span>9066<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;processors&quot;</span>&gt;</span>16<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;processorExecutor&quot;</span>&gt;</span>16<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;useOffHeapForMerge&quot;</span>&gt;</span>0<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">system</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- 任意设置登陆 mycat 的用户名,密码,数据库  --&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">user</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;mycat&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;password&quot;</span>&gt;</span>xxx<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;schemas&quot;</span>&gt;</span>xxx_schemas<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">user</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">mycat:server</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"逻辑库配置-schema-xml\"><a href=\"#逻辑库配置-schema-xml\" class=\"headerlink\" title=\"逻辑库配置 schema.xml\"></a>逻辑库配置 <code>schema.xml</code></h2><figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span>?&gt;</span></span><br><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"keyword\">mycat</span>:schema <span class=\"keyword\">SYSTEM</span> <span class=\"string\">&quot;schema.dtd&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">mycat:schema</span> <span class=\"attr\">xmlns:mycat</span>=<span class=\"string\">&quot;http://io.mycat/&quot;</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- 设置表的存储方式.schema name=&quot;TESTDB&quot; 与 server.xml中的 TESTDB 设置一致  --&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">schema</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;xxx_schemas&quot;</span> <span class=\"attr\">checkSQLschema</span>=<span class=\"string\">&quot;false&quot;</span> <span class=\"attr\">sqlMaxLimit</span>=<span class=\"string\">&quot;2000&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"comment\">&lt;!-- 全局表 dataNode 都会写一份 --&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">table</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;t_as_subject&quot;</span> <span class=\"attr\">primaryKey</span>=<span class=\"string\">&quot;id&quot;</span> <span class=\"attr\">dataNode</span>=<span class=\"string\">&quot;node_0$1-4&quot;</span> <span class=\"attr\">type</span>=<span class=\"string\">&quot;global&quot;</span>/&gt;</span>\t</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- rule 为分库规则, 这里使用一致性HASH分库, childTable 数据会与父级分到同一个库中 --&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">table</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;t_as_question&quot;</span> <span class=\"attr\">primaryKey</span>=<span class=\"string\">&quot;question_id&quot;</span> <span class=\"attr\">dataNode</span>=<span class=\"string\">&quot;node_0$1-4&quot;</span> <span class=\"attr\">rule</span>=<span class=\"string\">&quot;sharding-by-murmur-question_id&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t\t<span class=\"tag\">&lt;<span class=\"name\">childTable</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;t_as_question_option&quot;</span> <span class=\"attr\">primaryKey</span>=<span class=\"string\">&quot;question_option_id&quot;</span> <span class=\"attr\">joinKey</span>=<span class=\"string\">&quot;question_id&quot;</span> <span class=\"attr\">parentKey</span>=<span class=\"string\">&quot;question_id&quot;</span>/&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">table</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">table</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;t_as_option&quot;</span> <span class=\"attr\">primaryKey</span>=<span class=\"string\">&quot;option_id&quot;</span> <span class=\"attr\">dataNode</span>=<span class=\"string\">&quot;node_0$1-4&quot;</span> <span class=\"attr\">rule</span>=<span class=\"string\">&quot;sharding-by-murmur-option_id&quot;</span>/&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">schema</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- 设置dataNode 对应的数据库,及 mycat 连接的地址dataHost --&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">dataNode</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;node_01&quot;</span> <span class=\"attr\">dataHost</span>=<span class=\"string\">&quot;resource-cluster&quot;</span> <span class=\"attr\">database</span>=<span class=\"string\">&quot;question_storage_00&quot;</span> /&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">dataNode</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;node_02&quot;</span> <span class=\"attr\">dataHost</span>=<span class=\"string\">&quot;resource-cluster&quot;</span> <span class=\"attr\">database</span>=<span class=\"string\">&quot;question_storage_01&quot;</span> /&gt;</span> </span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">dataNode</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;node_03&quot;</span> <span class=\"attr\">dataHost</span>=<span class=\"string\">&quot;resource-cluster&quot;</span> <span class=\"attr\">database</span>=<span class=\"string\">&quot;question_storage_02&quot;</span> /&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">dataNode</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;node_04&quot;</span> <span class=\"attr\">dataHost</span>=<span class=\"string\">&quot;resource-cluster&quot;</span> <span class=\"attr\">database</span>=<span class=\"string\">&quot;question_storage_03&quot;</span> /&gt;</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">dataHost</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;resource-cluster&quot;</span> <span class=\"attr\">maxCon</span>=<span class=\"string\">&quot;1000&quot;</span> <span class=\"attr\">minCon</span>=<span class=\"string\">&quot;50&quot;</span> <span class=\"attr\">balance</span>=<span class=\"string\">&quot;0&quot;</span> <span class=\"attr\">writeType</span>=<span class=\"string\">&quot;0&quot;</span> <span class=\"attr\">dbType</span>=<span class=\"string\">&quot;mysql&quot;</span> <span class=\"attr\">dbDriver</span>=<span class=\"string\">&quot;native&quot;</span>&gt;</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"comment\">&lt;!--心跳检测 --&gt;</span>\t\t</span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">heartbeat</span>&gt;</span>select user()<span class=\"tag\">&lt;/<span class=\"name\">heartbeat</span>&gt;</span>\t\t</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"comment\">&lt;!-- can have multi write hosts --&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">writeHost</span> <span class=\"attr\">host</span>=<span class=\"string\">&quot;hostM1&quot;</span> <span class=\"attr\">url</span>=<span class=\"string\">&quot;127.0.0.1:3306&quot;</span> <span class=\"attr\">user</span>=<span class=\"string\">&quot;root&quot;</span> <span class=\"attr\">password</span>=<span class=\"string\">&quot;test123&quot;</span>/&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">dataHost</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">mycat:schema</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"分库规则-rule-xml\"><a href=\"#分库规则-rule-xml\" class=\"headerlink\" title=\"分库规则 rule.xml\"></a>分库规则 <code>rule.xml</code></h2><p>定义 <code>schema.xml</code> <code>table</code> 标签绑定的分库规则:</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;?xml version=<span class=\"string\">&quot;1.0&quot;</span> encoding=<span class=\"string\">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- - - Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); </span></span><br><span class=\"line\"><span class=\"comment\">\t- you may not use this file except in compliance with the License. - You </span></span><br><span class=\"line\"><span class=\"comment\">\tmay obtain a copy of the License at - - http://www.apache.org/licenses/LICENSE-2.0 </span></span><br><span class=\"line\"><span class=\"comment\">\t- - Unless required by applicable law or agreed to in writing, software - </span></span><br><span class=\"line\"><span class=\"comment\">\tdistributed under the License is distributed on an &quot;AS IS&quot; BASIS, - WITHOUT </span></span><br><span class=\"line\"><span class=\"comment\">\tWARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. - See the </span></span><br><span class=\"line\"><span class=\"comment\">\tLicense for the specific language governing permissions and - limitations </span></span><br><span class=\"line\"><span class=\"comment\">\tunder the License. --&gt;</span></span><br><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"keyword\">mycat</span>:rule <span class=\"keyword\">SYSTEM</span> <span class=\"string\">&quot;rule.dtd&quot;</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">mycat:rule</span> <span class=\"attr\">xmlns:mycat</span>=<span class=\"string\">&quot;http://io.mycat/&quot;</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">tableRule</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;sharding-by-murmur-question_id&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">rule</span>&gt;</span></span><br><span class=\"line\">\t\t  <span class=\"tag\">&lt;<span class=\"name\">columns</span>&gt;</span>question_id<span class=\"tag\">&lt;/<span class=\"name\">columns</span>&gt;</span></span><br><span class=\"line\">\t\t  <span class=\"tag\">&lt;<span class=\"name\">algorithm</span>&gt;</span>murmur<span class=\"tag\">&lt;/<span class=\"name\">algorithm</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">rule</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">tableRule</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">tableRule</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;sharding-by-murmur-option_id&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">rule</span>&gt;</span></span><br><span class=\"line\">\t\t  <span class=\"tag\">&lt;<span class=\"name\">columns</span>&gt;</span>option_id<span class=\"tag\">&lt;/<span class=\"name\">columns</span>&gt;</span></span><br><span class=\"line\">\t\t  <span class=\"tag\">&lt;<span class=\"name\">algorithm</span>&gt;</span>murmur<span class=\"tag\">&lt;/<span class=\"name\">algorithm</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">rule</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">tableRule</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">function</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;murmur&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;io.mycat.route.function.PartitionByMurmurHash&quot;</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;seed&quot;</span>&gt;</span>0<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span><span class=\"comment\">&lt;!-- 默认是0 --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;count&quot;</span>&gt;</span>4<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span><span class=\"comment\">&lt;!-- 要分片的数据库节点数量，必须指定，否则没法分片 --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;virtualBucketTimes&quot;</span>&gt;</span>160<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span><span class=\"comment\">&lt;!-- 一个实际的数据库节点被映射为这么多虚拟节点，默认是160倍，也就是虚拟节点数是物理节点数的160倍 --&gt;</span></span><br><span class=\"line\">        <span class=\"comment\">&lt;!-- &lt;property name=&quot;weightMapFile&quot;&gt;weightMapFile&lt;/property&gt; 节点的权重，没有指定权重的节点默认是1。以properties文件的格式填写，以从0开始到count-1的整数值也就是节点索引为key，以节点权重值为值。所有权重值必须是正整数，否则以1&gt;代替 --&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;bucketMapPath&quot;</span>&gt;</span>/home/icampus3.0/mycat/bucketMapPath<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span>    </span><br><span class=\"line\">        <span class=\"comment\">&lt;!--    用于测试时观察各物理节点与虚拟节点的分布情况，如果指定了这个属性，会把虚拟节点的murmur hash值与物理节点的映射按行输出到这个文件，没有默认值，如果不指定，就不会输出任何东西 --&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">function</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">mycat:rule</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h1 id=\"Mycat-报错\"><a href=\"#Mycat-报错\" class=\"headerlink\" title=\"Mycat 报错\"></a>Mycat 报错</h1><h2 id=\"ERROR-No-such-file-or-directory-2\"><a href=\"#ERROR-No-such-file-or-directory-2\" class=\"headerlink\" title=\"ERROR: No such file or directory (2)\"></a>ERROR: No such file or directory (2)</h2><p>错误信息：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ERROR  | wrapper  | 2020/09/28 14:27:27 | JVM exited <span class=\"keyword\">while</span> loading the application.</span><br><span class=\"line\">STATUS | wrapper  | 2020/09/28 14:27:31 | Launching a JVM...</span><br><span class=\"line\">ERROR  | wrapper  | 2020/09/28 14:27:31 | Unable to start JVM: No such file or directory (2)</span><br><span class=\"line\">ERROR  | wrapper  | 2020/09/28 14:27:31 | JVM exited <span class=\"keyword\">while</span> loading the application.</span><br><span class=\"line\">STATUS | wrapper  | 2020/09/28 14:27:36 | Launching a JVM...</span><br><span class=\"line\">ERROR  | wrapper  | 2020/09/28 14:27:36 | Unable to start JVM: No such file or directory (2)</span><br><span class=\"line\">ERROR  | wrapper  | 2020/09/28 14:27:36 | JVM exited <span class=\"keyword\">while</span> loading the application.</span><br><span class=\"line\">FATAL  | wrapper  | 2020/09/28 14:27:36 | There were 5 failed launches <span class=\"keyword\">in</span> a row, each lasting less than 300 seconds.  Giving up.</span><br><span class=\"line\">FATAL  | wrapper  | 2020/09/28 14:27:36 |   There may be a configuration problem: please check the logs.</span><br><span class=\"line\">STATUS | wrapper  | 2020/09/28 14:27:36 | &lt;-- Wrapper Stopped</span><br></pre></td></tr></table></figure>\n\n<p>原因可能是JVM参数没有配置或者配置错误,  查看  <code>wrapper.conf</code>  中 <code>wrapper.java.command</code> 路径是否正确:</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wrapper.java.command=/home/icampus3.0/jdk_1.8.0_212/bin/java</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"ERROR-元素类型为-“mycat-rule”-的内容必须匹配-“-tableRule-function-”\"><a href=\"#ERROR-元素类型为-“mycat-rule”-的内容必须匹配-“-tableRule-function-”\" class=\"headerlink\" title=\"ERROR: 元素类型为 “mycat:rule” 的内容必须匹配 “(tableRule*,function*)”\"></a>ERROR: 元素类型为 “mycat:rule” 的内容必须匹配 “(tableRule*,function*)”</h2><p>错误信息:</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">INFO   | jvm 1    | 2020/09/28 14:36:45 | WrapperSimpleApp: Encountered an error running main: java.lang.ExceptionInInitializerError</span><br><span class=\"line\">INFO   | jvm 1    | 2020/09/28 14:36:45 | java.lang.ExceptionInInitializerError</span><br><span class=\"line\">INFO   | jvm 1    | 2020/09/28 14:36:45 |       at io.mycat.MycatStartup.main(MycatStartup.java:53)</span><br><span class=\"line\">INFO   | jvm 1    | 2020/09/28 14:36:45 |       at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</span><br><span class=\"line\">INFO   | jvm 1    | 2020/09/28 14:36:45 |       at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)</span><br><span class=\"line\">INFO   | jvm 1    | 2020/09/28 14:36:45 |       at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)</span><br><span class=\"line\">INFO   | jvm 1    | 2020/09/28 14:36:45 |       at java.lang.reflect.Method.invoke(Method.java:498)</span><br><span class=\"line\">INFO   | jvm 1    | 2020/09/28 14:36:45 |       at org.tanukisoftware.wrapper.WrapperSimpleApp.run(WrapperSimpleApp.java:240)</span><br><span class=\"line\">INFO   | jvm 1    | 2020/09/28 14:36:45 |       at java.lang.Thread.run(Thread.java:748)</span><br><span class=\"line\">INFO   | jvm 1    | 2020/09/28 14:36:45 | Caused by: io.mycat.config.util.ConfigException: org.xml.sax.SAXParseException; lineNumber: 26; columnNumber: 14; 元素类型为 &quot;mycat:rule&quot; 的内容必须匹配 &quot;(tableRule*,function*)&quot;。</span><br><span class=\"line\">INFO   | jvm 1    | 2020/09/28 14:36:45 |       at io.mycat.config.loader.xml.XMLRuleLoader.load(XMLRuleLoader.java:95)</span><br><span class=\"line\">INFO   | jvm 1    | 2020/09/28 14:36:45 |       at io.mycat.config.loader.xml.XMLRuleLoader.&lt;init&gt;(XMLRuleLoader.java:64)</span><br><span class=\"line\">INFO   | jvm 1    | 2020/09/28 14:36:45 |       at io.mycat.config.loader.xml.XMLSchemaLoader.&lt;init&gt;(XMLSchemaLoader.java:74)</span><br><span class=\"line\">INFO   | jvm 1    | 2020/09/28 14:36:45 |       at io.mycat.config.loader.xml.XMLSchemaLoader.&lt;init&gt;(XMLSchemaLoader.java:87)</span><br><span class=\"line\">INFO   | jvm 1    | 2020/09/28 14:36:45 |       at io.mycat.config.ConfigInitializer.&lt;init&gt;(ConfigInitializer.java:74)</span><br><span class=\"line\">INFO   | jvm 1    | 2020/09/28 14:36:45 |       at io.mycat.config.MycatConfig.&lt;init&gt;(MycatConfig.java:72)</span><br><span class=\"line\">INFO   | jvm 1    | 2020/09/28 14:36:45 |       at io.mycat.MycatServer.&lt;init&gt;(MycatServer.java:144)</span><br><span class=\"line\">INFO   | jvm 1    | 2020/09/28 14:36:45 |       at io.mycat.MycatServer.&lt;clinit&gt;(MycatServer.java:96)</span><br><span class=\"line\">INFO   | jvm 1    | 2020/09/28 14:36:45 |       ... 7 more</span><br><span class=\"line\">INFO   | jvm 1    | 2020/09/28 14:36:45 | Caused by: org.xml.sax.SAXParseException; lineNumber: 26; columnNumber: 14; 元素类型为 &quot;mycat:rule&quot; 的内容必须匹配 &quot;(tableRule*,function*)&quot;。</span><br><span class=\"line\">INFO   | jvm 1    | 2020/09/28 14:36:45 |       at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:203)</span><br><span class=\"line\">INFO   | jvm 1    | 2020/09/28 14:36:45 |       at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.error(ErrorHandlerWrapper.java:134)</span><br><span class=\"line\">INFO   | jvm 1    | 2020/09/28 14:36:45 |       at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:396)</span><br><span class=\"line\">INFO   | jvm 1    | 2020/09/28 14:36:45 |       at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:327)</span><br><span class=\"line\">INFO   | jvm 1    | 2020/09/28 14:36:45 |       at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:284)</span><br><span class=\"line\">INFO   | jvm 1    | 2020/09/28 14:36:45 |       at com.sun.org.apache.xerces.internal.impl.dtd.XMLDTDValidator.handleEndElement(XMLDTDValidator.java:1994)</span><br><span class=\"line\">INFO   | jvm 1    | 2020/09/28 14:36:45 |       at com.sun.org.apache.xerces.internal.impl.dtd.XMLDTDValidator.endElement(XMLDTDValidator.java:879)</span><br><span class=\"line\">INFO   | jvm 1    | 2020/09/28 14:36:45 |       at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanEndElement(XMLDocumentFragmentScannerImpl.java:1782)</span><br><span class=\"line\">INFO   | jvm 1    | 2020/09/28 14:36:45 |       at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:2967)</span><br><span class=\"line\">INFO   | jvm 1    | 2020/09/28 14:36:45 |       at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:602)</span><br><span class=\"line\">INFO   | jvm 1    | 2020/09/28 14:36:45 |       at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:505)</span><br><span class=\"line\">INFO   | jvm 1    | 2020/09/28 14:36:45 |       at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:842)</span><br><span class=\"line\">INFO   | jvm 1    | 2020/09/28 14:36:45 |       at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:771)</span><br><span class=\"line\">INFO   | jvm 1    | 2020/09/28 14:36:45 |       at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:141)</span><br><span class=\"line\">INFO   | jvm 1    | 2020/09/28 14:36:45 |       at com.sun.org.apache.xerces.internal.parsers.DOMParser.parse(DOMParser.java:243)</span><br><span class=\"line\">INFO   | jvm 1    | 2020/09/28 14:36:45 |       at com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse(DocumentBuilderImpl.java:339)</span><br><span class=\"line\">INFO   | jvm 1    | 2020/09/28 14:36:45 |       at javax.xml.parsers.DocumentBuilder.parse(DocumentBuilder.java:121)</span><br><span class=\"line\">INFO   | jvm 1    | 2020/09/28 14:36:45 |       at io.mycat.config.util.ConfigUtil.getDocument(ConfigUtil.java:115)</span><br><span class=\"line\">INFO   | jvm 1    | 2020/09/28 14:36:45 |       at io.mycat.config.loader.xml.XMLRuleLoader.load(XMLRuleLoader.java:86)</span><br><span class=\"line\">INFO   | jvm 1    | 2020/09/28 14:36:45 |       ... 14 more</span><br><span class=\"line\">STATUS | wrapper  | 2020/09/28 14:36:47 | &lt;-- Wrapper Stopped</span><br></pre></td></tr></table></figure>\n\n<p>这个错误原因是 <code>rule.xml</code> 中 <code>function</code> 配置内容不能在 <code>tableRule</code> 配置之前, 调换下顺序即可</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">tableRule</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;sharding-by-murmur&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">rule</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">columns</span>&gt;</span>id<span class=\"tag\">&lt;/<span class=\"name\">columns</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">algorithm</span>&gt;</span>murmur<span class=\"tag\">&lt;/<span class=\"name\">algorithm</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">rule</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">tableRule</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">function</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;murmur&quot;</span> <span class=\"attr\">class</span>=<span class=\"string\">&quot;io.mycat.route.function.PartitionByMurmurHash&quot;</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;seed&quot;</span>&gt;</span>0<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span><span class=\"comment\">&lt;!-- 默认是0 --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;count&quot;</span>&gt;</span>4<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span><span class=\"comment\">&lt;!-- 要分片的数据库节点数量，必须指定，否则没法分片 --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;virtualBucketTimes&quot;</span>&gt;</span>160<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span><span class=\"comment\">&lt;!-- 一个实际的数据库节点被映射为这么多虚拟节点，默认是160倍，也就是虚拟节点数是物理节点数的160倍 --&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- &lt;property name=&quot;weightMapFile&quot;&gt;weightMapFile&lt;/property&gt; 节点的权重，没有指定权重的节点默认是1。以properties文件的格式填写，以从0开始到count-1的整数值也就是节点索引为key，以节点权重值为值。所有权重值必须是正整数，否则以1&gt;代替 --&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;bucketMapPath&quot;</span>&gt;</span>/home/mycat/bucketMapPath<span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span>    </span><br><span class=\"line\">    <span class=\"comment\">&lt;!--    用于测试时观察各物理节点与虚拟节点的分布情况，如果指定了这个属性，会把虚拟节点的murmur hash值与物理节点的映射按行输出到这个文件，没有默认值，如果不指定，就不会输出任何东西 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">function</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Navicat-打开表报错-find-no-route\"><a href=\"#Navicat-打开表报错-find-no-route\" class=\"headerlink\" title=\"Navicat 打开表报错: find no route\"></a>Navicat 打开表报错: <code>find no route</code></h2><p>错误信息:</p>\n <img src=\"/post/Linux-Mycat-%E5%AE%89%E8%A3%85/image-20200928144809077.png\" class=\"\" title=\"image-20200928144809077\">\n\n<p>修改 <code>schema.xml</code> 的 <code>checkSQLschema=“false”</code> , 改为 <code>true</code> 即可. </p>\n<p>当该值为 <code>true</code> 时，例如我们执行语句 <code>select * from TESTDB.company</code>. <code>mycat</code> 会把语句修改为 <code>select * from company </code> 去掉 <code>TESTDB</code>。</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">schema</span> <span class=\"attr\">name</span>=<span class=\"string\">&quot;db_store&quot;</span> <span class=\"attr\">checkSQLschema</span>=<span class=\"string\">&quot;true&quot;</span> <span class=\"attr\">sqlMaxLimit</span>=<span class=\"string\">&quot;100&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"SQL-排序报错-all-columns-in-order-by-clause-should-be-in-the-selected-column-list-xxx\"><a href=\"#SQL-排序报错-all-columns-in-order-by-clause-should-be-in-the-selected-column-list-xxx\" class=\"headerlink\" title=\"SQL 排序报错: all columns in order by clause should be in the selected column list!xxx\"></a>SQL 排序报错: <code>all columns in order by clause should be in the selected column list!xxx</code></h2><p>这是 <code>mycat</code> 的一个 <code>bug</code> ，无法识别sql中的 ` 符号, 去掉  <code>sql</code> 中的 ` 号即可.</p>\n<p>详情: <a href=\"https://blog.csdn.net/xiaofo258/article/details/95065562\">mycat执行sql报 all columns in group by clause should be in the selected column list.!<code>logis_id</code>错误</a></p>\n<p>源码: </p>\n<img src=\"/post/Linux-Mycat-%E5%AE%89%E8%A3%85/20190708155402355.png\" class=\"\" title=\"img\">\n\n<h2 id=\"Mycat-插入报错-Unknown-column-‘-mycat-op-time’-in-‘field-list’\"><a href=\"#Mycat-插入报错-Unknown-column-‘-mycat-op-time’-in-‘field-list’\" class=\"headerlink\" title=\"Mycat 插入报错:  Unknown column ‘_mycat_op_time’ in ‘field list’\"></a>Mycat 插入报错:  Unknown column ‘_mycat_op_time’ in ‘field list’</h2><p>这个是由参数 <code>useGlobleTableCheck</code> 控制的全局表一致性检测，原理通过在全局表增加 <code>_MYCAT_OP_TIME</code> 字段来进行一致性检测，类型为 <code>bigint</code>，<code>create</code>语句通过 <code>mycat</code> 执行会自动加上这个字段，其他情况请自己手工添加。 </p>\n<p>在创建全局表类型的表时添加这个字段: </p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">`_mycat_op_time` bigint(20) DEFAULT NULL</span><br></pre></td></tr></table></figure>\n\n","text":" 最近有个数据迁移需求, 量比较大, 搞个新环境测试下~ 以下内容参考至官方文档: https://github.com/MyCATApache/Mycat-S...","permalink":"/post/Linux-Mycat-安装","photos":[],"count_time":{"symbolsCount":"14k","symbolsTime":"13 mins."},"categories":[{"name":"Mycat","slug":"Mycat","count":1,"path":"api/categories/Mycat.json"}],"tags":[{"name":"Linux","slug":"Linux","count":8,"path":"api/tags/Linux.json"},{"name":"Mycat","slug":"Mycat","count":1,"path":"api/tags/Mycat.json"},{"name":"_mycat_op_time","slug":"mycat-op-time","count":1,"path":"api/tags/mycat-op-time.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E4%B8%8B%E8%BD%BD-Mycat\"><span class=\"toc-text\">下载 Mycat</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E7%9B%AE%E5%BD%95%E8%AF%B4%E6%98%8E\"><span class=\"toc-text\">目录说明</span></a></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E8%BF%90%E8%A1%8C\"><span class=\"toc-text\">运行</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E9%85%8D%E7%BD%AE-Mycat\"><span class=\"toc-text\">配置 Mycat</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%9C%8D%E5%8A%A1%E9%85%8D%E7%BD%AE-server-xml\"><span class=\"toc-text\">服务配置 server.xml</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E9%80%BB%E8%BE%91%E5%BA%93%E9%85%8D%E7%BD%AE-schema-xml\"><span class=\"toc-text\">逻辑库配置 schema.xml</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%88%86%E5%BA%93%E8%A7%84%E5%88%99-rule-xml\"><span class=\"toc-text\">分库规则 rule.xml</span></a></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#Mycat-%E6%8A%A5%E9%94%99\"><span class=\"toc-text\">Mycat 报错</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#ERROR-No-such-file-or-directory-2\"><span class=\"toc-text\">ERROR: No such file or directory (2)</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#ERROR-%E5%85%83%E7%B4%A0%E7%B1%BB%E5%9E%8B%E4%B8%BA-%E2%80%9Cmycat-rule%E2%80%9D-%E7%9A%84%E5%86%85%E5%AE%B9%E5%BF%85%E9%A1%BB%E5%8C%B9%E9%85%8D-%E2%80%9C-tableRule-function-%E2%80%9D\"><span class=\"toc-text\">ERROR: 元素类型为 “mycat:rule” 的内容必须匹配 “(tableRule*,function*)”</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Navicat-%E6%89%93%E5%BC%80%E8%A1%A8%E6%8A%A5%E9%94%99-find-no-route\"><span class=\"toc-text\">Navicat 打开表报错: find no route</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#SQL-%E6%8E%92%E5%BA%8F%E6%8A%A5%E9%94%99-all-columns-in-order-by-clause-should-be-in-the-selected-column-list-xxx\"><span class=\"toc-text\">SQL 排序报错: all columns in order by clause should be in the selected column list!xxx</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Mycat-%E6%8F%92%E5%85%A5%E6%8A%A5%E9%94%99-Unknown-column-%E2%80%98-mycat-op-time%E2%80%99-in-%E2%80%98field-list%E2%80%99\"><span class=\"toc-text\">Mycat 插入报错:  Unknown column ‘_mycat_op_time’ in ‘field list’</span></a></li></ol></li></ol>","author":{"name":"Weiba","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/24520686?v=4","link":"/","description":"啊 又忘了更新了！","socials":{"github":"https://github.com/xweiba","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"Linux 安装配置 Elasticsearch-2.4.6","uid":"3bdfbcd280906945c52159d485008d9b","slug":"Linux-安装配置-ElasticSearch-2-4-6","date":"2020-09-29T08:01:01.000Z","updated":"2025-04-30T08:11:18.861Z","comments":true,"path":"api/articles/Linux-安装配置-ElasticSearch-2-4-6.json","keywords":null,"cover":null,"text":" ES最新版已经到 7.x 了, 想用最新版啊, 多了很多特性.但是这个环境是做业务测试的, 原来用的就是 2.4.6 , 防止出问题, 延续了. 下载安装进入...","permalink":"/post/Linux-安装配置-ElasticSearch-2-4-6","photos":[],"count_time":{"symbolsCount":"1.2k","symbolsTime":"1 mins."},"categories":[{"name":"ElasticSearch","slug":"ElasticSearch","count":1,"path":"api/categories/ElasticSearch.json"}],"tags":[{"name":"Linux","slug":"Linux","count":8,"path":"api/tags/Linux.json"},{"name":"Elasticsearch","slug":"Elasticsearch","count":1,"path":"api/tags/Elasticsearch.json"}],"author":{"name":"Weiba","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/24520686?v=4","link":"/","description":"啊 又忘了更新了！","socials":{"github":"https://github.com/xweiba","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"Linux JDK 8 安装","uid":"76d5c77f5891921bb88d3dcae699a119","slug":"Linux-JDK-8-安装","date":"2020-09-28T03:03:07.000Z","updated":"2025-04-30T08:11:18.861Z","comments":true,"path":"api/articles/Linux-JDK-8-安装.json","keywords":null,"cover":null,"text":" demo新环境, 非Docker记录一下~ 下载JDK8Oracle 下载需要注册, 直接去github上下载~~ 项目地址: oracle-java JDK...","permalink":"/post/Linux-JDK-8-安装","photos":[],"count_time":{"symbolsCount":482,"symbolsTime":"1 mins."},"categories":[{"name":"JDK","slug":"JDK","count":1,"path":"api/categories/JDK.json"}],"tags":[{"name":"Linux","slug":"Linux","count":8,"path":"api/tags/Linux.json"},{"name":"JDK8","slug":"JDK8","count":1,"path":"api/tags/JDK8.json"}],"author":{"name":"Weiba","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/24520686?v=4","link":"/","description":"啊 又忘了更新了！","socials":{"github":"https://github.com/xweiba","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}