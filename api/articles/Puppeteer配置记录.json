{"title":"Puppeteer 配置记录","uid":"c50e1df99d9d47827851c22dac23fe21","slug":"Puppeteer配置记录","date":"2022-12-23T07:02:52.000Z","updated":"2025-04-30T08:11:18.862Z","comments":true,"path":"api/articles/Puppeteer配置记录.json","keywords":null,"cover":null,"content":"<h1 id=\"Puppeteer项目配置\"><a href=\"#Puppeteer项目配置\" class=\"headerlink\" title=\"Puppeteer项目配置\"></a>Puppeteer项目配置</h1><p><strong>注意事项：</strong></p>\n<ul>\n<li>CentOS 7 以下不支持 Puppeteer</li>\n<li>Puppeteer 服务需能够访问被打印的页面</li>\n<li>请先确保字体安装成功，否则会导致PDF渲染异常</li>\n</ul>\n<h2 id=\"字体安装\"><a href=\"#字体安装\" class=\"headerlink\" title=\"字体安装\"></a>字体安装</h2><p>安装 <code>fontconfig mkfontscale</code> ：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum -y install fontconfig mkfontscale</span><br></pre></td></tr></table></figure>\n\n<p>将源码目录fonts文件夹下字体文件夹复制至服务器的 <code>/usr/share/fonts</code> 目录下, 然后执行以下命令重建字体缓存，并查看字体是否已安装，出现 <code>/usr/share/fonts/puppeteer</code> 目录即为正常。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkfontscale</span><br><span class=\"line\">mkfontdir</span><br><span class=\"line\">fc-cache</span><br><span class=\"line\">fc-list :lang=zh</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"依赖安装\"><a href=\"#依赖安装\" class=\"headerlink\" title=\"依赖安装\"></a>依赖安装</h2><p>安装 <code>chrome puppeteer</code> 所需依赖：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum -y install atk at-spi2-atk libxkbcommon-x11-devel libXcomposite gtk3 alsa-lib-devel</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"部署源码文件\"><a href=\"#部署源码文件\" class=\"headerlink\" title=\"部署源码文件\"></a>部署源码文件</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">上传源码</span></span><br><span class=\"line\">unzip puppeteer-microservice.zip</span><br><span class=\"line\">npm install </span><br><span class=\"line\">npm run start # 启动测试</span><br></pre></td></tr></table></figure>\n<h2 id=\"Windows-与-Linux-渲染结果不一致\"><a href=\"#Windows-与-Linux-渲染结果不一致\" class=\"headerlink\" title=\"Windows 与 Linux 渲染结果不一致\"></a>Windows 与 Linux 渲染结果不一致</h2><p>Github issues: <a href=\"https://github.com/puppeteer/puppeteer/issues/2410\">2410</a></p>\n<ol>\n<li>请确认渲染字体一致。</li>\n<li>请确认Puppeteer服务端配置中包含以下配置：  <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">puppeteer args:</span><br><span class=\"line\">&#x27;--disable-font-subpixel-positioning&#x27;, // 必须添加，解决空格问题</span><br><span class=\"line\">&#x27;--font-render-hinting=none&#x27; // 可选添加，当前业务加不加效果都一样</span><br><span class=\"line\"></span><br><span class=\"line\">css: // 可选添加，当前业务加不加效果都一样</span><br><span class=\"line\">* &#123;</span><br><span class=\"line\">      text-rendering: geometricprecision !important;</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure></li>\n</ol>\n<h2 id=\"配置文件说明：\"><a href=\"#配置文件说明：\" class=\"headerlink\" title=\"配置文件说明：\"></a>配置文件说明：</h2><p><a href=\"https://peter.sh/experiments/chromium-command-line-switches/\">args 参数说明文档</a></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable language_\">module</span>.<span class=\"property\">exports</span> = &#123;</span><br><span class=\"line\">    <span class=\"attr\">port</span>: <span class=\"number\">9572</span>,</span><br><span class=\"line\">    <span class=\"attr\">puppeteer</span>: &#123;</span><br><span class=\"line\">        <span class=\"attr\">headless</span>: <span class=\"literal\">true</span>, <span class=\"comment\">// 是否启用无头模式页面</span></span><br><span class=\"line\">        <span class=\"comment\">//executablePath: &#x27;/usr/lib64/chromium-browser/headless_shell&#x27;,</span></span><br><span class=\"line\">        <span class=\"attr\">args</span>: [</span><br><span class=\"line\">            <span class=\"string\">&#x27;–-disable-gpu&#x27;</span>,</span><br><span class=\"line\">            <span class=\"string\">&#x27;-–disable-dev-shm-usage&#x27;</span>,</span><br><span class=\"line\">            <span class=\"string\">&#x27;-–disable-setuid-sandbox&#x27;</span>,</span><br><span class=\"line\">            <span class=\"string\">&#x27;-–no-first-run&#x27;</span>,</span><br><span class=\"line\">            <span class=\"string\">&#x27;--no-sandbox&#x27;</span>,</span><br><span class=\"line\">            <span class=\"string\">&#x27;-–no-zygote&#x27;</span>,</span><br><span class=\"line\">            <span class=\"string\">&#x27;-–single-process&#x27;</span>,</span><br><span class=\"line\">         <span class=\"string\">&#x27;--disable-font-subpixel-positioning&#x27;</span>, <span class=\"comment\">// 必须添加，解决windows和linux下渲染结果不一致问题</span></span><br><span class=\"line\">         <span class=\"string\">&#x27;--font-render-hinting=none&#x27;</span><span class=\"comment\">// 必须添加，解决windows和linux下渲染结果不一致问题</span></span><br><span class=\"line\">        ],</span><br><span class=\"line\">        <span class=\"attr\">ignoreHTTPSErrors</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">        <span class=\"attr\">timeout</span>: <span class=\"number\">0</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"attr\">browserPool</span>: &#123;</span><br><span class=\"line\">        <span class=\"attr\">min</span>: <span class=\"number\">1</span>, <span class=\"comment\">// 池中最小实例数</span></span><br><span class=\"line\">        <span class=\"attr\">max</span>: <span class=\"number\">5</span>, <span class=\"comment\">// 池中最大实例数</span></span><br><span class=\"line\">        <span class=\"attr\">idleTimeoutMillis</span>: <span class=\"number\">1000</span> * <span class=\"number\">60</span> * <span class=\"number\">60</span> * <span class=\"number\">24</span>, <span class=\"comment\">// 实例存活时间，超时将重新创建新的实例，防止内存泄漏，浏览器实例默认24小时</span></span><br><span class=\"line\">        <span class=\"attr\">evictionRunIntervalMillis</span>: <span class=\"number\">1000</span> * <span class=\"number\">60</span> * <span class=\"number\">60</span> <span class=\"comment\">// 实例存活检测时间</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"attr\">pagePool</span>: &#123;</span><br><span class=\"line\">        <span class=\"attr\">min</span>: <span class=\"number\">5</span>,</span><br><span class=\"line\">        <span class=\"attr\">max</span>: <span class=\"number\">10</span>,</span><br><span class=\"line\">        <span class=\"attr\">cacheDisabled</span>: <span class=\"literal\">true</span>, <span class=\"comment\">// 是否禁用页面缓存</span></span><br><span class=\"line\">        <span class=\"attr\">idleTimeoutMillis</span>: <span class=\"number\">1000</span> * <span class=\"number\">60</span> * <span class=\"number\">60</span>, <span class=\"comment\">// 页面实例默认一小时重新创建一次</span></span><br><span class=\"line\">        <span class=\"attr\">evictionRunIntervalMillis</span>: <span class=\"number\">1000</span> * <span class=\"number\">60</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"attr\">tempRootDir</span>: <span class=\"string\">&#x27;/home/icampus3.0/pkgs/puppeteer-microservice/temp&#x27;</span>,</span><br><span class=\"line\">    <span class=\"attr\">contextPath</span>: <span class=\"string\">&#x27;/microservice/puppeteerservice&#x27;</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"服务脚本\"><a href=\"#服务脚本\" class=\"headerlink\" title=\"服务脚本\"></a>服务脚本</h2><p>stop.sh</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">!/bin/bash</span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\"><span class=\"comment\">######################</span></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">created by code on 2021/10/25</span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\"><span class=\"comment\">######################</span></span></span><br><span class=\"line\">function stop()&#123;</span><br><span class=\"line\">       serviceName=puppeteer-microservice</span><br><span class=\"line\">       local pid=$(ps aux|grep &quot;puppeteer-microservice&quot;|grep -v grep|awk &#x27;&#123;print $2&#125;&#x27; 2&gt;&gt;/dev/null)</span><br><span class=\"line\"></span><br><span class=\"line\">       if [[ -n $pid ]]; then</span><br><span class=\"line\"></span><br><span class=\"line\">            kill -9 $pid 2&gt;&gt;/dev/null</span><br><span class=\"line\"></span><br><span class=\"line\">            if [[ $? -ne 0 ]]; then</span><br><span class=\"line\">                 echo -e &quot;  Failed to stop service of $&#123;serviceNam&#125;&quot;</span><br><span class=\"line\">                 return 1</span><br><span class=\"line\">            else</span><br><span class=\"line\">                 echo -e &quot;  Successful to stop service of $&#123;serviceNam&#125;&quot;</span><br><span class=\"line\">                 return 0</span><br><span class=\"line\">            fi</span><br><span class=\"line\">       fi</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">stop</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>start.sh</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\">!/bin/bash</span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\"><span class=\"comment\">######################</span></span></span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">created by code on 2021/10/25</span></span><br><span class=\"line\"><span class=\"meta prompt_\">#</span><span class=\"language-bash\"><span class=\"comment\">######################</span></span></span><br><span class=\"line\">function setVars()&#123;</span><br><span class=\"line\">       serviceName=puppeteer-microservice</span><br><span class=\"line\">       basepath=/home/icampus3.0</span><br><span class=\"line\">       jdkHome=$&#123;basepath&#125;/jdk8</span><br><span class=\"line\">       servHome=$&#123;basepath&#125;/pkgs/$&#123;serviceName&#125;</span><br><span class=\"line\">       start=$&#123;servHome&#125;/start.sh</span><br><span class=\"line\">       log=$&#123;basepath&#125;/logs/$&#123;serviceName&#125;.log</span><br><span class=\"line\">       npm=/usr/local/n/versions/node/14.18.1/bin/npm</span><br><span class=\"line\">       option=&quot;run start&quot;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">function start()&#123;</span><br><span class=\"line\">       cd $servHome</span><br><span class=\"line\">       sh stop.sh</span><br><span class=\"line\">       echo -e &quot;  Start to start up $&#123;serviceName&#125; : &quot;</span><br><span class=\"line\"></span><br><span class=\"line\">       echo -e &quot;$&#123;npm&#125; $&#123;option&#125;&quot;</span><br><span class=\"line\">       $&#123;npm&#125; $&#123;option&#125; &gt; $log 2&gt;&amp;1 &amp;</span><br><span class=\"line\"></span><br><span class=\"line\">       echo $! &gt; pid</span><br><span class=\"line\"></span><br><span class=\"line\">       if [[ -z $(cat pid) ]]; then</span><br><span class=\"line\">           echo -e &quot;  Failed to start up $&#123;serviceName&#125;&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">           return 1</span><br><span class=\"line\">       else</span><br><span class=\"line\">           echo -e &quot;  Successful to start up $&#123;serviceName&#125;&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">           return 0</span><br><span class=\"line\">       fi</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">setVars</span><br><span class=\"line\">start</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"可选安装\"><a href=\"#可选安装\" class=\"headerlink\" title=\"可选安装\"></a>可选安装</h2><p><del><strong>chrome不同内核版本，css有兼容性问题，一律使用最新版本。</strong></del>  兼容性问题已修复</p>\n<p>网上说这个版本的Chrome性能比较好：<a href=\"https://blog.it2048.cn/article-headless-puppeteer/\">无头浏览器性能对比与Puppeteer的优化文档</a>, 实际测试下来差不多。</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">yum install chromium-headless</span><br><span class=\"line\">/usr/lib64/chromium-browser/headless_shell 调用路径</span><br></pre></td></tr></table></figure>\n\n<p>安装依赖时执行下面的命令跳过Chrome的下载</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install puppeteer --ignore-scripts</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Nginx配置\"><a href=\"#Nginx配置\" class=\"headerlink\" title=\"Nginx配置\"></a>Nginx配置</h2><figure class=\"highlight nginx\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"section\">upstream</span> puppeteer-microservice &#123;</span><br><span class=\"line\">   <span class=\"attribute\">server</span> xxxx:xxxx;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"section\">location</span><span class=\"regexp\"> ^~</span> /microservice/puppeteerservice &#123;</span><br><span class=\"line\">    <span class=\"attribute\">proxy_set_header</span> Host <span class=\"variable\">$http_host</span>;</span><br><span class=\"line\">    <span class=\"attribute\">proxy_redirect</span> <span class=\"literal\">off</span>;</span><br><span class=\"line\">    <span class=\"attribute\">proxy_pass</span> http://puppeteer-microservice/microservice/puppeteerservice;</span><br><span class=\"line\">    <span class=\"attribute\">proxy_set_header</span> X-Real-IP <span class=\"variable\">$remote_addr</span>;</span><br><span class=\"line\">    <span class=\"attribute\">proxy_set_header</span> X-Forwarded-For <span class=\"variable\">$proxy_add_x_forwarded_for</span>;</span><br><span class=\"line\">    <span class=\"attribute\">client_max_body_size</span> <span class=\"number\">1000m</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<h1 id=\"Puppeteer服务接口\"><a href=\"#Puppeteer服务接口\" class=\"headerlink\" title=\"Puppeteer服务接口\"></a>Puppeteer服务接口</h1><h2 id=\"Web转PDF服务\"><a href=\"#Web转PDF服务\" class=\"headerlink\" title=\"Web转PDF服务\"></a>Web转PDF服务</h2><p>[GET] <code>/microservice/puppeteerservice/pdf</code>  </p>\n<p>参数：</p>\n<table>\n<thead>\n<tr>\n<th>params</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>htmlUrl</td>\n<td>base64后的待生成PDF的页面地址</td>\n</tr>\n</tbody></table>\n<p>htmlUrl参数：</p>\n<table>\n<thead>\n<tr>\n<th>htmlUrl</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>format</td>\n<td>A3 或 A4, 默认 A4</td>\n</tr>\n<tr>\n<td>printBackground</td>\n<td>是否打印背景图, 默认false</td>\n</tr>\n</tbody></table>\n","text":"Puppeteer项目配置注意事项： CentOS 7 以下不支持 Puppeteer Puppeteer 服务需能够访问被打印的页面 请先确保字体安装成功，否...","permalink":"/post/Puppeteer配置记录","photos":[],"count_time":{"symbolsCount":"5k","symbolsTime":"5 mins."},"categories":[{"name":"Puppeteer","slug":"Puppeteer","count":1,"path":"api/categories/Puppeteer.json"}],"tags":[{"name":"配置","slug":"配置","count":8,"path":"api/tags/配置.json"},{"name":"Puppeteer","slug":"Puppeteer","count":1,"path":"api/tags/Puppeteer.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#Puppeteer%E9%A1%B9%E7%9B%AE%E9%85%8D%E7%BD%AE\"><span class=\"toc-text\">Puppeteer项目配置</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%AD%97%E4%BD%93%E5%AE%89%E8%A3%85\"><span class=\"toc-text\">字体安装</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%BE%9D%E8%B5%96%E5%AE%89%E8%A3%85\"><span class=\"toc-text\">依赖安装</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E9%83%A8%E7%BD%B2%E6%BA%90%E7%A0%81%E6%96%87%E4%BB%B6\"><span class=\"toc-text\">部署源码文件</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Windows-%E4%B8%8E-Linux-%E6%B8%B2%E6%9F%93%E7%BB%93%E6%9E%9C%E4%B8%8D%E4%B8%80%E8%87%B4\"><span class=\"toc-text\">Windows 与 Linux 渲染结果不一致</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%B4%E6%98%8E%EF%BC%9A\"><span class=\"toc-text\">配置文件说明：</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%9C%8D%E5%8A%A1%E8%84%9A%E6%9C%AC\"><span class=\"toc-text\">服务脚本</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%8F%AF%E9%80%89%E5%AE%89%E8%A3%85\"><span class=\"toc-text\">可选安装</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Nginx%E9%85%8D%E7%BD%AE\"><span class=\"toc-text\">Nginx配置</span></a></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#Puppeteer%E6%9C%8D%E5%8A%A1%E6%8E%A5%E5%8F%A3\"><span class=\"toc-text\">Puppeteer服务接口</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Web%E8%BD%ACPDF%E6%9C%8D%E5%8A%A1\"><span class=\"toc-text\">Web转PDF服务</span></a></li></ol></li></ol>","author":{"name":"Weiba","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/24520686?v=4","link":"/","description":"啊 又忘了更新了！","socials":{"github":"https://github.com/xweiba","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"Docker-创建Hexo环境","uid":"0cc92406a47f2ec432fad59606c76747","slug":"Docker-创建Hexo环境","date":"2022-12-23T15:14:30.000Z","updated":"2025-04-30T08:11:18.833Z","comments":true,"path":"api/articles/Docker-创建Hexo环境.json","keywords":null,"cover":[],"text":" GitHub 访问速度不佳, 在Nas上部署一套Hexo 编写DockerFile本来是打算看看有没有合适的镜像的, 不是太大, 就是配置太麻烦, 干脆自己自...","permalink":"/post/Docker-创建Hexo环境","photos":[],"count_time":{"symbolsCount":"2.1k","symbolsTime":"2 mins."},"categories":[{"name":"Docker","slug":"Docker","count":7,"path":"api/categories/Docker.json"}],"tags":[{"name":"Docker","slug":"Docker","count":3,"path":"api/tags/Docker.json"},{"name":"Hexo","slug":"Hexo","count":5,"path":"api/tags/Hexo.json"},{"name":"nodejs","slug":"nodejs","count":1,"path":"api/tags/nodejs.json"}],"author":{"name":"Weiba","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/24520686?v=4","link":"/","description":"啊 又忘了更新了！","socials":{"github":"https://github.com/xweiba","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"Docker数据迁移","uid":"8ab3f21ba7a602db5d827c424cd46168","slug":"Docker数据迁移","date":"2022-12-23T06:52:19.000Z","updated":"2025-04-30T08:11:18.833Z","comments":true,"path":"api/articles/Docker数据迁移.json","keywords":null,"cover":null,"text":"Docker 数据迁移 主机是lxc的，只分配了10G，安装 office 镜像空间不够，将 Docker 数据迁移到硬盘上。 停止 Docker 12syst...","permalink":"/post/Docker数据迁移","photos":[],"count_time":{"symbolsCount":362,"symbolsTime":"1 mins."},"categories":[{"name":"Docker","slug":"Docker","count":7,"path":"api/categories/Docker.json"}],"tags":[{"name":"Docker","slug":"Docker","count":3,"path":"api/tags/Docker.json"}],"author":{"name":"Weiba","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/24520686?v=4","link":"/","description":"啊 又忘了更新了！","socials":{"github":"https://github.com/xweiba","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}